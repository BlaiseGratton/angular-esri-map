!function(e){"use strict";e.module("esri.core",[])}(angular),function(e){"use strict";e.module("esri.core").factory("esriLoader",["$q",function(r){function t(t){var n=r.defer();e.isDefined(window.esri)&&n.reject("ESRI API is already loaded."),t=e.isDefined(t)?t:{};var i=document.createElement("script");return i.type="text/javascript",i.src=t.url||"http://js.arcgis.com/3.14compact",i.onload=function(){n.resolve(window.esri)},document.body.appendChild(i),n.promise}function n(){return e.isDefined(window.esri)}function i(t,i){var a=r.defer();return n()?(e.isString(t)?require([t],function(r){i&&e.isFunction(i)&&i(r),a.resolve(r)}):e.isArray(t)?require(t,function(){var r=Array.prototype.slice.call(arguments);i&&e.isFunction(i)&&i.apply(this,r),a.resolve(r)}):a.reject("An Array<String> or String is required to load modules."),a.promise):(a.reject("Trying to call esriLoader.require(), but esri API has not been loaded yet. Run esriLoader.bootstrap() if you are lazy loading esri ArcGIS API."),a.promise)}return{bootstrap:t,isLoaded:n,require:i}}])}(angular),function(e){"use strict";e.module("esri.core").service("esriRegistry",["$q",function(e){var r={};return{_register:function(t,n){r[t]||(r[t]=e.defer());var i=r[t];return n.then(function(e){return i.resolve(e),e},function(e){return i.reject(e),e}),function(){delete r[t]}},get:function(t){if(r[t])return r[t].promise;var n=e.defer();return r[t]=n,n.promise}}}])}(angular),function(e){"use strict";e.module("esri.core").factory("esriMapUtils",["$q","esriLoader",function(r,t){function n(e,r){return"esri.geometry.Extent"===e.declaredClass?e:new r(e)}var i={};return i.addCustomBasemap=function(r,n){return t.require("esri/basemaps").then(function(t){var i=n.baseMapLayers;return!e.isArray(i)&&e.isArray(n.urls)&&(i=n.urls.map(function(e){return{url:e}})),e.isArray(i)&&(t[r]={baseMapLayers:i,thumbnailUrl:n.thumbnailUrl,title:n.title}),t})},i.createMap=function(e,r){return t.require(["esri/map","esri/geometry/Extent"]).then(function(t){var i=t[0],a=t[1];return r&&r.hasOwnProperty("extent")&&(r.extent=n(r.extent,a)),new i(e,r)})},i.createWebMap=function(e,i,a,s){var o=r.defer();return t.require(["esri/arcgis/utils","esri/geometry/Extent"],function(r,t){a.hasOwnProperty("extent")&&(a.extent=n(a.extent,t)),r.createMap(e,i,{mapOptions:a}).then(function(e){s.layerInfos=r.getLegendLayers(e),s.itemInfo=e.itemInfo,o.resolve(e.map)})}),o.promise},i}])}(angular),function(e){"use strict";e.module("esri.core").factory("esriLayerUtils",["esriLoader",function(r){function t(e){var r;return"string"==typeof e&&(r=[],e.split(",").forEach(function(e){var t=parseInt(e);isNaN(t)||r.push(t)})),r}function n(r,t){return"esri.InfoTemplate"===r.declaredClass?r:e.isArray(r)&&2===r.length?new t(r[0],r[1]):new t(r.title,r.content)}var i={};return i.createFeatureLayer=function(e,t){return r.require(["esri/layers/FeatureLayer","esri/InfoTemplate"]).then(function(r){var i=r[0],a=r[1];return t&&(t.infoTemplate&&(t.infoTemplate=n(t.infoTemplate,a)),t.hasOwnProperty("mode")&&(t.mode=i[t.mode])),new i(e,t)})},i.createDynamicMapServiceLayer=function(i,a,s){return r.require(["esri/layers/ArcGISDynamicMapServiceLayer","esri/InfoTemplate","esri/layers/ImageParameters"]).then(function(r){var o,u=r[0],c=r[1],f=r[2];if(a){if(a.infoTemplates)for(var l in a.infoTemplates)a.infoTemplates.hasOwnProperty(l)&&(a.infoTemplates[l].infoTemplate=n(a.infoTemplates[l].infoTemplate,c));if(e.isObject(a.imageParameters)&&"esri.layers.ImageParameters"!==a.imageParameters.declaredClass){var m=new f;for(var p in a.imageParameters)a.imageParameters.hasOwnProperty(p)&&(m[p]=a.imageParameters[p]);a.imageParameters=m}}return o=new u(i,a),s&&o.setVisibleLayers(t(s)),o})},i.createInfoTemplate=function(e){return r.require("esri/InfoTemplate").then(function(r){return n(e,r)})},i}])}(angular);